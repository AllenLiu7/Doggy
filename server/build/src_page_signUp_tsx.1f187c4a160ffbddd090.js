/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunkclient"] = self["webpackChunkclient"] || []).push([["src_page_signUp_tsx"],{

/***/ "./src/page/signUp.tsx":
/*!*****************************!*\
  !*** ./src/page/signUp.tsx ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ SignUp)\n/* harmony export */ });\n/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ \"./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\");\n/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/slicedToArray */ \"./node_modules/@babel/runtime/helpers/esm/slicedToArray.js\");\n/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/regenerator */ \"./node_modules/@babel/runtime/regenerator/index.js\");\n/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _material_ui_core_esm_Box__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @material-ui/core/esm/Box */ \"./node_modules/@material-ui/core/esm/Box/Box.js\");\n/* harmony import */ var _material_ui_core_esm_Button__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! @material-ui/core/esm/Button */ \"./node_modules/@material-ui/core/esm/Button/Button.js\");\n/* harmony import */ var _material_ui_core_esm_IconButton__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! @material-ui/core/esm/IconButton */ \"./node_modules/@material-ui/core/esm/IconButton/IconButton.js\");\n/* harmony import */ var _material_ui_core_esm_InputAdornment__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! @material-ui/core/esm/InputAdornment */ \"./node_modules/@material-ui/core/esm/InputAdornment/InputAdornment.js\");\n/* harmony import */ var _material_ui_core_esm_TextField__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @material-ui/core/esm/TextField */ \"./node_modules/@material-ui/core/esm/TextField/TextField.js\");\n/* harmony import */ var _material_ui_core_esm_Typography__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @material-ui/core/esm/Typography */ \"./node_modules/@material-ui/core/esm/Typography/Typography.js\");\n/* harmony import */ var _material_ui_core_styles__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @material-ui/core/styles */ \"./node_modules/@material-ui/core/esm/styles/makeStyles.js\");\n/* harmony import */ var _material_ui_icons_esm_Visibility__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! @material-ui/icons/esm/Visibility */ \"./node_modules/@material-ui/icons/esm/Visibility.js\");\n/* harmony import */ var _material_ui_icons_esm_VisibilityOff__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! @material-ui/icons/esm/VisibilityOff */ \"./node_modules/@material-ui/icons/esm/VisibilityOff.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react_hook_form__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! react-hook-form */ \"./node_modules/react-hook-form/dist/index.esm.js\");\n/* harmony import */ var react_redux__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! react-redux */ \"./node_modules/react-redux/es/index.js\");\n/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! react-router-dom */ \"./node_modules/react-router/esm/react-router.js\");\n/* harmony import */ var react_toastify__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! react-toastify */ \"./node_modules/react-toastify/dist/react-toastify.esm.js\");\n/* harmony import */ var _components_common_googleButton__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../components/common/googleButton */ \"./src/components/common/googleButton.tsx\");\n/* harmony import */ var _redux_slice_loginUser__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../redux/slice/loginUser */ \"./src/redux/slice/loginUser.ts\");\n/* harmony import */ var _service_api_auth__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../service/api/auth */ \"./src/service/api/auth.ts\");\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! react/jsx-runtime */ \"./node_modules/react/jsx-runtime.js\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nfunction SignUp() {\n  var dispatch = (0,react_redux__WEBPACK_IMPORTED_MODULE_5__.useDispatch)();\n  var history = (0,react_router_dom__WEBPACK_IMPORTED_MODULE_10__.useHistory)();\n\n  var _useForm = (0,react_hook_form__WEBPACK_IMPORTED_MODULE_4__.useForm)(),\n      control = _useForm.control,\n      handleSubmit = _useForm.handleSubmit,\n      watch = _useForm.watch,\n      setError = _useForm.setError;\n\n  var watchFields = watch(['password']);\n\n  var _useSelector = (0,react_redux__WEBPACK_IMPORTED_MODULE_5__.useSelector)(_redux_slice_loginUser__WEBPACK_IMPORTED_MODULE_7__.currentUserSelector),\n      isSuccess = _useSelector.isSuccess,\n      isError = _useSelector.isError,\n      errorMessage = _useSelector.errorMessage,\n      currentUser = _useSelector.currentUser,\n      token = _useSelector.token;\n\n  var _useState = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)(false),\n      _useState2 = (0,_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1__.default)(_useState, 2),\n      showPassword = _useState2[0],\n      setShowPassword = _useState2[1];\n\n  (0,react__WEBPACK_IMPORTED_MODULE_3__.useEffect)(function () {\n    if (token) {\n      history.push('/app');\n    }\n\n    if (isError) {\n      react_toastify__WEBPACK_IMPORTED_MODULE_11__.toast.error(errorMessage);\n      dispatch((0,_redux_slice_loginUser__WEBPACK_IMPORTED_MODULE_7__.clearState)());\n    }\n\n    if (isSuccess) {\n      history.push('/app');\n      dispatch((0,_redux_slice_loginUser__WEBPACK_IMPORTED_MODULE_7__.clearState)());\n    }\n  }, [isError, isSuccess]);\n\n  var handleClickShowPassword = function handleClickShowPassword() {\n    setShowPassword(!showPassword);\n  };\n\n  var onSubmit = /*#__PURE__*/function () {\n    var _ref = (0,_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__.default)( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default().mark(function _callee(data) {\n      var username, email, _yield$checkUserEmail, emailCheck, _yield$checkUsernameR, userCheck;\n\n      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default().wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              username = data.username, email = data.email;\n              _context.next = 3;\n              return (0,_service_api_auth__WEBPACK_IMPORTED_MODULE_8__.checkUserEmailReq)({\n                email: email\n              });\n\n            case 3:\n              _yield$checkUserEmail = _context.sent;\n              emailCheck = _yield$checkUserEmail.data;\n              _context.next = 7;\n              return (0,_service_api_auth__WEBPACK_IMPORTED_MODULE_8__.checkUsernameReq)({\n                username: username\n              });\n\n            case 7:\n              _yield$checkUsernameR = _context.sent;\n              userCheck = _yield$checkUsernameR.data;\n\n              if (userCheck) {\n                setError('username', {\n                  type: 'validate',\n                  message: 'User name is registered'\n                });\n              }\n\n              if (emailCheck) {\n                setError('email', {\n                  type: 'validate',\n                  message: 'Email address is registered'\n                });\n              }\n\n              if (!userCheck && !emailCheck) {\n                dispatch((0,_redux_slice_loginUser__WEBPACK_IMPORTED_MODULE_7__.signUpUser)(data));\n              }\n\n            case 12:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function onSubmit(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var useStyles = (0,_material_ui_core_styles__WEBPACK_IMPORTED_MODULE_12__.default)({\n    root: {\n      display: 'flex',\n      justifyContent: 'center',\n      alignItems: 'center',\n      height: '100vh'\n    },\n    form: {\n      height: 'auto',\n      width: 320,\n      display: 'flex',\n      flexDirection: 'column',\n      alignItems: 'center',\n      padding: 50,\n      borderRadius: 15\n    },\n    title: {\n      fontWeight: 500\n    }\n  });\n  var classes = useStyles();\n  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsxs)(_material_ui_core_esm_Box__WEBPACK_IMPORTED_MODULE_13__.default, {\n    className: classes.root,\n    children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsxs)(_material_ui_core_esm_Box__WEBPACK_IMPORTED_MODULE_13__.default, {\n      children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(_material_ui_core_esm_Typography__WEBPACK_IMPORTED_MODULE_14__.default, {\n        className: classes.title,\n        variant: \"h2\",\n        align: \"left\",\n        color: \"primary\",\n        gutterBottom: true,\n        children: \"Doggy Book\"\n      }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(_material_ui_core_esm_Typography__WEBPACK_IMPORTED_MODULE_14__.default, {\n        variant: \"h5\",\n        children: \"Welcome to our community. Let us have fun!\"\n      })]\n    }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(_material_ui_core_esm_Box__WEBPACK_IMPORTED_MODULE_13__.default, {\n      border: 1,\n      ml: 20,\n      className: classes.form,\n      children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsxs)(\"form\", {\n        noValidate: true,\n        autoComplete: \"off\",\n        onSubmit: handleSubmit(onSubmit),\n        children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(react_hook_form__WEBPACK_IMPORTED_MODULE_4__.Controller, {\n          name: \"username\",\n          control: control,\n          defaultValue: \"\",\n          rules: {\n            required: 'User name required'\n          },\n          render: function render(_ref2) {\n            var _ref2$field = _ref2.field,\n                onChange = _ref2$field.onChange,\n                value = _ref2$field.value,\n                error = _ref2.fieldState.error;\n            return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(_material_ui_core_esm_TextField__WEBPACK_IMPORTED_MODULE_15__.default, {\n              label: \"User Name\",\n              variant: \"outlined\",\n              fullWidth: true,\n              margin: \"normal\",\n              required: true,\n              value: value,\n              onChange: onChange,\n              error: !!error,\n              helperText: error ? error.message : null\n            });\n          }\n        }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(react_hook_form__WEBPACK_IMPORTED_MODULE_4__.Controller, {\n          name: \"email\",\n          control: control,\n          defaultValue: \"\",\n          rules: {\n            required: 'Email required',\n            pattern: {\n              value: /^[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,4}$/,\n              message: 'Not a valid email'\n            }\n          },\n          render: function render(_ref3) {\n            var _ref3$field = _ref3.field,\n                onChange = _ref3$field.onChange,\n                value = _ref3$field.value,\n                error = _ref3.fieldState.error;\n            return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(_material_ui_core_esm_TextField__WEBPACK_IMPORTED_MODULE_15__.default, {\n              label: \"Email\",\n              variant: \"outlined\",\n              fullWidth: true,\n              margin: \"normal\",\n              required: true,\n              value: value,\n              onChange: onChange,\n              error: !!error,\n              helperText: error ? error.message : null\n            });\n          }\n        }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(react_hook_form__WEBPACK_IMPORTED_MODULE_4__.Controller, {\n          name: \"password\",\n          control: control,\n          defaultValue: \"\",\n          rules: {\n            required: 'Password is required',\n            minLength: {\n              value: 6,\n              message: 'At least 6 characters'\n            }\n          },\n          render: function render(_ref4) {\n            var _ref4$field = _ref4.field,\n                onChange = _ref4$field.onChange,\n                value = _ref4$field.value,\n                error = _ref4.fieldState.error;\n            return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(_material_ui_core_esm_TextField__WEBPACK_IMPORTED_MODULE_15__.default, {\n              type: showPassword ? 'text' : 'password',\n              required: true,\n              label: \"Password\",\n              variant: \"outlined\",\n              fullWidth: true,\n              margin: \"normal\",\n              InputProps: {\n                endAdornment: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(_material_ui_core_esm_InputAdornment__WEBPACK_IMPORTED_MODULE_16__.default, {\n                  position: \"end\",\n                  children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(_material_ui_core_esm_IconButton__WEBPACK_IMPORTED_MODULE_17__.default, {\n                    \"aria-label\": \"toggle password visibility\",\n                    onClick: handleClickShowPassword,\n                    children: showPassword ? /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(_material_ui_icons_esm_Visibility__WEBPACK_IMPORTED_MODULE_18__.default, {}) : /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(_material_ui_icons_esm_VisibilityOff__WEBPACK_IMPORTED_MODULE_19__.default, {})\n                  })\n                })\n              },\n              value: value,\n              onChange: onChange,\n              error: !!error,\n              helperText: error ? error.message : 'At least 6 characters'\n            });\n          }\n        }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(react_hook_form__WEBPACK_IMPORTED_MODULE_4__.Controller, {\n          name: \"passwordAgain\",\n          control: control,\n          defaultValue: \"\",\n          rules: {\n            required: 'Password again is required',\n            validate: function validate(v) {\n              return v === watchFields[0] || \"Passwords don't match\";\n            },\n            minLength: {\n              value: 6,\n              message: 'At least 6 characters'\n            }\n          },\n          render: function render(_ref5) {\n            var _ref5$field = _ref5.field,\n                onChange = _ref5$field.onChange,\n                value = _ref5$field.value,\n                error = _ref5.fieldState.error;\n            return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(_material_ui_core_esm_TextField__WEBPACK_IMPORTED_MODULE_15__.default, {\n              type: showPassword ? 'text' : 'password',\n              required: true,\n              label: \"Password Again\",\n              variant: \"outlined\",\n              fullWidth: true,\n              margin: \"none\",\n              InputProps: {\n                endAdornment: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(_material_ui_core_esm_InputAdornment__WEBPACK_IMPORTED_MODULE_16__.default, {\n                  position: \"end\",\n                  children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(_material_ui_core_esm_IconButton__WEBPACK_IMPORTED_MODULE_17__.default, {\n                    \"aria-label\": \"toggle password visibility\",\n                    onClick: handleClickShowPassword,\n                    children: showPassword ? /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(_material_ui_icons_esm_Visibility__WEBPACK_IMPORTED_MODULE_18__.default, {}) : /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(_material_ui_icons_esm_VisibilityOff__WEBPACK_IMPORTED_MODULE_19__.default, {})\n                  })\n                })\n              },\n              value: value,\n              onChange: onChange,\n              error: !!error,\n              helperText: error ? error.message : null\n            });\n          }\n        }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsxs)(_material_ui_core_esm_Box__WEBPACK_IMPORTED_MODULE_13__.default, {\n          mt: 3,\n          children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(_material_ui_core_esm_Button__WEBPACK_IMPORTED_MODULE_20__.default, {\n            type: \"submit\",\n            fullWidth: true,\n            variant: \"contained\",\n            color: \"secondary\",\n            children: \"Sign Up\"\n          }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(_components_common_googleButton__WEBPACK_IMPORTED_MODULE_6__.default, {})]\n        })]\n      })\n    })]\n  });\n}\n\n//# sourceURL=webpack://client/./src/page/signUp.tsx?");

/***/ })

}]);